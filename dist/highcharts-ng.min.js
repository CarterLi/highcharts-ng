/**
 * highcharts-ng
 * @version v0.0.13 - 2017-01-10
 * @link https://github.com/pablojim/highcharts-ng
 * @author Barry Fitzgerald <>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";if("undefined"!=typeof module&&module.exports){var c="undefined"==typeof angular?require("angular"):angular,d="undefined"==typeof Highcharts?require("highcharts"):Highcharts;b(c,d),module.exports="highcharts-ng"}else b(a.angular,a.Highcharts)}(new Function("return this")(),function(a,b){"use strict";function c(a,b,c){var d=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);return c.apply(this,a),d?d.apply(this,a):void 0}}function d(b,c){if(a.isArray(c)){b=a.isArray(b)?b:[];for(var e=0;e<c.length;e++)b[e]=d(b[e]||{},c[e])}else if(a.isObject(c)){b=a.isObject(b)?b:{};for(var f in c)b[f]=d(b[f]||{},c[f])}else b=c;return b}function e(a,b){function c(){return d}var d=a.when(b.Highcharts);return{getHighcharts:c,ready:function(a,b){c().then(function(){a.call(b)})}}}function f(b,e){function f(b,c,d,f){var g={},h=!1,k=function(b,d){var e,f=[];if(b){var j=i(b);if(j&&!c.disableDataWatch)return!1;if(a.forEach(b,function(b,c){f.push(b.id);var e=h.get(b.id);if(e)if(a.equals(g[b.id],o(b)))if(void 0!==b.visible&&e.visible!==b.visible&&e.setVisible(b.visible,!1),c<d.length){var i=d[c],j=a.copy(i),k=b.data[b.data.length-1];j.data.push(k),a.equals(j,b)?e.addPoint(k,!1):(j.data.shift(),a.equals(j,b)?e.addPoint(k,!1,!0):e.setData(a.copy(b.data),!1))}else e.setData(a.copy(b.data),!1);else e.update(a.copy(b),!1);else h.addSeries(a.copy(b),!1);g[b.id]=o(b)}),c.config.noData){var k=!1;for(e=0;e<b.length;e++)if(b[e].data&&b[e].data.length>0){k=!0;break}k?h.hideLoading():h.showLoading(c.config.noData)}}for(e=h.series.length-1;e>=0;e--){var l=h.series[e];"highcharts-navigator-series"!==l.options.id&&f.indexOf(l.options.id)<0&&l.remove(!1)}return!0},q=function(){h&&h.destroy(),g={};var a=c.config||{},e=l(c,d,a),f=a.func||void 0,i=p(c);h=new b[i](e,f);for(var k=0;k<j.length;k++)a[j[k]]&&n(h,a[j[k]],j[k]);a.loading&&h.showLoading(),a.getHighcharts=function(){return h}};q(),c.disableDataWatch?c.$watchCollection("config.series",function(a,b){k(a),h.redraw()}):c.$watch("config.series",function(a,b){var c=k(a,b);c&&h.redraw()},!0),c.$watch("config.title",function(a){h.setTitle(a,!0)},!0),c.$watch("config.subtitle",function(a){h.setTitle(!0,a)},!0),c.$watch("config.loading",function(a){a?h.showLoading(a===!0?null:a):h.hideLoading()}),c.$watch("config.noData",function(a){c.config&&c.config.loading&&h.showLoading(a)},!0),c.$watch("config.credits.enabled",function(a){a?h.credits.show():h.credits&&h.credits.hide()}),c.$watch(p,function(a,b){a!==b&&q()}),a.forEach(j,function(b){c.$watch("config."+b,function(c){if(c){if(a.isArray(c))for(var d=0;d<c.length;d++){var e=c[d];d<h[b].length&&(h[b][d].update(e,!1),m(h[b][d],a.copy(e)))}else h[b][0].update(c,!1),m(h[b][0],a.copy(c));h.redraw()}},!0)}),c.$watch("config.options",function(a,b,c){a!==b&&(q(),k(c.config.series),h.redraw())},!0),c.$watch("config.size",function(a,b){a!==b&&a&&h.setSize(a.width||h.chartWidth,a.height||h.chartHeight)},!0),c.$on("highchartsng.reflow",function(){h.reflow()}),c.$on("$destroy",function(){if(h){try{h.destroy()}catch(a){}e(function(){d.remove()},0)}})}function g(a,c,d){function e(b){f(b,a,c,d)}b.getHighcharts().then(e)}var h=0,i=function(b){var c=!1;return a.forEach(b,function(b){a.isDefined(b.id)||(b.id="series-"+h++,c=!0)}),c},j=["xAxis","yAxis"],k={stock:"StockChart",map:"Map",chart:"Chart"},l=function(b,f,g){var h={},i={chart:{events:{}},title:{},subtitle:{},series:[],credits:{},plotOptions:{},navigator:{enabled:!1},xAxis:{events:{}},yAxis:{events:{}}};return h=g.options?d(i,g.options):i,h.chart.renderTo=f[0],a.forEach(j,function(f){a.isDefined(g[f])&&(h[f]=d(h[f]||{},g[f]),(a.isDefined(g[f].currentMin)||a.isDefined(g[f].currentMax))&&(c(h.chart.events,"selection",function(a){var c=this;a[f]?b.$apply(function(){b.config[f].currentMin=a[f][0].min,b.config[f].currentMax=a[f][0].max}):b.$apply(function(){b.config[f].currentMin=c[f][0].dataMin,b.config[f].currentMax=c[f][0].dataMax})}),c(h.chart.events,"addSeries",function(a){b.config[f].currentMin=this[f][0].min||b.config[f].currentMin,b.config[f].currentMax=this[f][0].max||b.config[f].currentMax}),c(h[f].events,"setExtremes",function(a){a.trigger&&"zoom"!==a.trigger&&e(function(){b.config[f].currentMin=a.min,b.config[f].currentMax=a.max,b.config[f].min=a.min,b.config[f].max=a.max},0)})))}),g.title&&(h.title=g.title),g.subtitle&&(h.subtitle=g.subtitle),g.credits&&(h.credits=g.credits),g.size&&(g.size.width&&(h.chart.width=g.size.width),g.size.height&&(h.chart.height=g.size.height)),h},m=function(a,b){var c=a.getExtremes();b.currentMin===c.dataMin&&b.currentMax===c.dataMax||(a.setExtremes?a.setExtremes(b.currentMin,b.currentMax,!1):a.detachedsetExtremes(b.currentMin,b.currentMax,!1))},n=function(a,b,c){(b.currentMin||b.currentMax)&&a[c][0].setExtremes(b.currentMin,b.currentMax,!0)},o=function(b){return a.extend(d({},b),{data:null,visible:null})},p=function(a){return void 0===a.config?"Chart":k[(""+a.config.chartType).toLowerCase()]||(a.config.useHighStocks?"StockChart":"Chart")};return{restrict:"EAC",replace:!0,template:"<div></div>",scope:{config:"=",disableDataWatch:"="},link:g}}a.module("highcharts-ng",[]).factory("highchartsNG",["$q","$window",e]).directive("highchart",["highchartsNG","$timeout",f])});